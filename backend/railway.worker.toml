# Railway Configuration for Synthora Worker
# ==========================================
# This file configures the background worker service.
# Deploy this as a separate service in Railway pointing to the same repo.

[build]
# Use Dockerfile builder to avoid Nixpacks PEP 668 issues
builder = "dockerfile"
dockerfilePath = "Dockerfile.worker"

[deploy]
# Start command - run RQ worker with proper logging configuration
startCommand = "python run_worker.py --queues video,default,analytics,posts,cleanup"

# Explicitly disable healthcheck - worker is not an HTTP service
healthcheckPath = ""
healthcheckTimeout = 0

# Number of replicas
numReplicas = 1

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
