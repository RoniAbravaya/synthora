# Railway Configuration for Synthora Worker
# ==========================================
# This file configures the background worker service.
# Deploy this as a separate service in Railway pointing to the same repo.

[build]
# Use Dockerfile builder to avoid Nixpacks PEP 668 issues
builder = "dockerfile"
dockerfilePath = "Dockerfile.worker"

[deploy]
# Start command - run RQ worker
# Queue names must match those in app/workers/scheduler.py
startCommand = "python -m rq.cli worker --url $REDIS_URL video default analytics posts cleanup"

# Explicitly disable healthcheck - worker is not an HTTP service
healthcheckPath = ""
healthcheckTimeout = 0

# Number of replicas
numReplicas = 1

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
