# Railway Configuration for Synthora Backend
# ============================================
# This file configures how Railway builds and deploys the backend service.

[build]
# Use Dockerfile builder to avoid Nixpacks PEP 668 issues
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
# Start command - run migrations then start FastAPI
startCommand = "python -m alembic upgrade head && uvicorn app.main:app --host 0.0.0.0 --port $PORT"

# Health check endpoint
healthcheckPath = "/api/v1/health"
healthcheckTimeout = 30

# Number of replicas
numReplicas = 1

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
