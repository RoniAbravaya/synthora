# Railway Configuration for Synthora Backend
# ============================================
# This file configures how Railway builds and deploys the backend service.

[build]
# Use Dockerfile builder to avoid Nixpacks PEP 668 issues
builder = "dockerfile"
dockerfilePath = "Dockerfile"

[deploy]
# Start command - use shell to ensure variable expansion works
startCommand = "sh -c 'echo Starting on port ${PORT:-8000} && uvicorn app.main:app --host 0.0.0.0 --port ${PORT:-8000} --log-level info'"

# Health check endpoint - use root /health for faster response
healthcheckPath = "/health"
healthcheckTimeout = 120

# Number of replicas
numReplicas = 1

# Restart policy
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
